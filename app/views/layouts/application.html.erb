<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-RoomnHouse" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= content_for?(:title) ? yield(:title) : "Roomnhouse" %></title>

  <%= csrf_meta_tags %>

  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
      <![endif]-->
      <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700' rel='stylesheet' type='text/css'>
      <%= stylesheet_link_tag "application", :media => "all" %>
    
    </head>
    <body >
      <header role="banner">
        <nav class="navbar navbar-main navbar-static-top">
          <div class="navbar-inner">
            <div class="container">
              <div class="container nav-collapse p">
                <%= link_to root_path do%><%= image_tag "logo.png", class: "head-logo" %><% end %>
                <ul class="nav">
                  <% if !user_signed_in? %>
                  <li><%= link_to "Login", new_user_session_path  %></li>
                  <%= menu_divider %>
                  <li><%= link_to "Signup", new_user_registration_path  %></li>
                  <% else %>
                  <li><div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                      Hello, <%= current_user.firstname.capitalize %>
                      <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                      <li><%= link_to "My Listings", offers_path %></li>
                      <li><%= link_to "Account Settings", edit_user_registration_path %></li>
                      <li class="divider"></li>
                      <li><%= link_to "logout", destroy_user_session_path %></li>
                    </ul>     
                  </div>   
                </li>
                <%= menu_divider %>
                <% end %>
                <li>
                  <span>
                    <%= link_to "List Your Place", new_offer_path, :class => "btn btn-primary" %>
                  </span>
                </li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
        </div>
      </nav>
    </header>

    <div style="padding-top:41px"></div>
    <%= bootstrap_flash %>
    <%= yield :header %>
    <%= yield :body%>

    <div class="footer">
      <div class="footer-inner">
        <div class="grid_6">
          <h3>Customer Service</h3>
          <hr/>
          <ul>
            <li><%= link_to "How RoomNHouse works", nil %></li>
            <li>FAQ</li>
            <li>Contact support</li>
          </ul>
        </div>
        <div class="grid_6">
          <h3>About RoomnHouse</h3>
          <hr/>
          <ul>
            <li><%= link_to "About Us", aboutus_path  %></li>
            <li>Jobs</li>
          </ul>
        </div>
        <div class="grid_6">
          <h3>Join us on</h3>
          <hr/>
          <ul>
            <li><a href="https://www.facebook.com/roomnhouse">Facebook</a></li>
            <li><a href="https://twitter.com/RoomNHouse">Twitter</a></li>
            <li>Google +</li>
            <li>Youtube</li>
            <li>Blog</li>
          </ul>
        </div>
        <div class="grid_6">
          <h3>Secure payment</h3>
          <hr/>
          <ul>
            <li>Paypal</li>
            <li>Visa</li>
            <li>Norton secure</li>
          </ul>
        </div>
      </div>
    </div>
    <%= javascript_include_tag "application" %>


<script>
  var fileUploadErrors = {
  maxFileSize: 'File is too big',
  minFileSize: 'File is too small',
  acceptFileTypes: 'Filetype not allowed',
  maxNumberOfFiles: 'Max number of files exceeded',
  uploadedBytes: 'Uploaded bytes exceed file size',
  emptyResult: 'Empty file upload result'
  };
</script>

<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
    <td class="name"><span>{%=file.name%}</span></td>
    <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
    {% if (file.error) { %}
    <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else if (o.files.valid && !i) { %}
    <td>
      <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
    </td>
    <td class="start">{% if (!o.options.autoUpload) { %}
      <button class="btn btn-primary">
        <i class="icon-upload icon-white"></i>
        <span>{%=locale.fileupload.start%}</span>
      </button>
      {% } %}</td>
    {% } else { %}
    <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
      <button class="btn btn-warning">
        <i class="icon-ban-circle icon-white"></i>
        <span>{%=locale.fileupload.cancel%}</span>
      </button>
      {% } %}</td>
  </tr>
  {% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
      {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
          <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
          {% } %}</td>
        <td class="name">
          <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
        {% } %}
      <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
          <i class="icon-trash icon-white"></i>
          <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
      </td>
    </tr>
    {% } %}
</script>

<script type="text/javascript" charset="utf-8">
  $(function () {
      // Initialize the jQuery File Upload widget:
      $('#fileupload').fileupload();
      // 
      // Load existing files:
      $.getJSON($('#fileupload').prop('action'), function (files) {
        var fu = $('#fileupload').data('blueimpFileupload'), 
          template;
        fu._adjustMaxNumberOfFiles(-files.length);
        console.log(files);
        template = fu._renderDownload(files)
          .appendTo($('#fileupload .files'));
        // Force reflow:
        fu._reflow = fu._transition && template.length &&
          template[0].offsetWidth;
        template.addClass('in');
        $('#loading').remove();
      });

  });
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41949970-1', 'roomnhouse.com');
  ga('send', 'pageview');

</script>
  </body>
</html>
